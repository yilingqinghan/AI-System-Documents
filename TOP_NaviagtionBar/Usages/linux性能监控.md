# Linuxæ€§èƒ½ç›‘æ§

[toc]

## ä½“ç³»ç»“æ„



![a3119cdccbe38046ae41e5a8f7a9b52](https://img.zimei.fun/202405092157095.jpg)

## å…¥é—¨çº§

### 1.topï¼ˆå†…å­˜ï¼ŒCPUï¼‰

#### åŸºæœ¬å‘½ä»¤

```shell
top #å›è½¦åè¿›å…¥é¢æ¿

è¿›å…¥é¢æ¿å

1 # æŸ¥çœ‹æ‰€æœ‰cpu
c # æŸ¥çœ‹è¿›ç¨‹æ‰§è¡Œç›®å½•
q # é€€å‡ºé¢æ¿
```

> runningè¿è¡Œè¿›ç¨‹æ•°é‡
>
> sleepingç¡çœ è¿›ç¨‹
>
> zombilåƒµå°¸è¿›ç¨‹

#### ä½¿ç”¨åœºæ™¯

åŠŸèƒ½é½å…¨

### 3.vmstatï¼ˆå†…å­˜ï¼Œswapè™šæ‹Ÿå†…å­˜ï¼‰

#### åŸºæœ¬å‘½ä»¤

```shell
vmstat 1 10 # 1ç§’ä¸€åˆ·,åˆ·10æ¬¡
```

> memoryå†…å­˜ 
>
> swapè™šæ‹Ÿå†…å­˜
>
> si è¿› soå‡º
>
> cacheç¼“å­˜

#### ä½¿ç”¨åœºæ™¯

ä¸»è¦ç”¨æ¥çœ‹å„ç§å†…å­˜

### 4.iostatï¼ˆç£ç›˜ï¼‰

#### åŸºæœ¬å‘½ä»¤

```shell
iostat -d -x -k 1 10 # 1ç§’ä¸€åˆ·,åˆ·10æ¬¡
```

> %util ç¹å¿™ç‡ï¼ˆè¶Šé«˜è¶Šå¿™ï¼‰

#### ä½¿ç”¨åœºæ™¯

ä¾‹å¦‚ï¼ŒæœåŠ¡å™¨æŒ‚äº†2ä¸ª1Tçš„ç›˜ï¼Œæ­£åœ¨å¤§é‡è¯»å†™ã€‚åŒæ—¶æœåŠ¡å™¨ä¸Šé¢æœ‰æä¾›æ•°æ®åº“æœåŠ¡ã€‚

æ­¤æ—¶æ‹…å¿ƒç£ç›˜ç”±äºè¯»å†™æ“ä½œè¾¾åˆ°IOç“¶é¢ˆç­‰ï¼Œå¯¼è‡´æœåŠ¡å™¨å´©æºƒã€‚éœ€è¦é€šè¿‡è¯¥å‘½ä»¤æŸ¥çœ‹ç£ç›˜å¿™ä¸å¿™ï¼ˆæŸ¥çœ‹çš„æ˜¯IOä½¿ç”¨ç‡ï¼‰ã€‚

psï¼š `df -h  df -Th`ä¹Ÿå¯ä»¥çœ‹ç£ç›˜

## ä¸­çº§

### 5.mpstatï¼ˆcpuï¼‰

#### åŸºæœ¬å‘½ä»¤

```shell
mpstat 1 10 # 1ç§’ä¸€åˆ·,åˆ·10æ¬¡
```

> %usr ä½¿ç”¨ 
>
> %idle ç©ºé—²
>
> %iowait ç­‰å¾…

#### ä½¿ç”¨åœºæ™¯

ä¸“é—¨çœ‹cpuå¿™ä¸å¿™ã€‚

å¯ä»¥çœ‹æœåŠ¡å™¨ä¸Šæ‰€æœ‰cpuã€‚ä¾‹å¦‚ï¼Œäº‘å¹³å°ä¸Šé¢ç§Ÿç”¨çš„æœåŠ¡å™¨æ˜¯4æ ¸çš„ï¼Œå…¨éƒ¨éƒ½èƒ½æŸ¥çœ‹ã€‚

### 6.pidstatï¼ˆæŸä¸ªè¿›ç¨‹ç£ç›˜è¯»å†™ï¼‰

#### åŸºæœ¬å‘½ä»¤

```shell
pidstat -d 1 10 # -då‚æ•°çœ‹ç›˜ï¼Œ1ç§’ä¸€åˆ·,åˆ·10æ¬¡ 
```

#### ä½¿ç”¨åœºæ™¯

å¯ä»¥çœ‹å“ªä¸ªè¿›ç¨‹åœ¨åšè¯»å†™ï¼Œè°åœ¨ç”¨ç£ç›˜ã€‚

å¹¶ä¸æ˜¯æ‰€æœ‰è¿›ç¨‹éƒ½ç”¨ç£ç›˜ï¼Œæœ‰çš„è¿›ç¨‹åªæ˜¯å•çº¯ä½¿ç”¨å†…å­˜ã€‚

è€Œæœ‰çš„è¿›ç¨‹ï¼Œä¾‹å¦‚ä¸æ–­å†™æ—¥å¿—æ–‡ä»¶ï¼Œå°±éœ€è¦ä¸€ç›´å ç”¨ç£ç›˜è¯»å†™ã€‚

### 7.freeï¼ˆå†…å­˜ï¼‰

#### åŸºæœ¬å‘½ä»¤

```shell
free -h # -hæ›´åŠ ç›´è§‚
```

#### ä½¿ç”¨åœºæ™¯

çœ‹å†…å­˜

### 8.netstatï¼ˆç½‘ç»œï¼‰

#### åŸºæœ¬å‘½ä»¤

```shell
çœ‹æœåŠ¡ç«¯å£å ç”¨æƒ…å†µ
netstat -anptu # æ›´åŠ å…¨é¢
or
ss -ntl # æ›´åŠ ç®€æ´
```

#### ä½¿ç”¨åœºæ™¯

çœ‹ç«¯å£ï¼Œçœ‹ç”¨æˆ·è®¿é—®é‡

### 9.sarï¼ˆæ€§èƒ½åˆ†æï¼‰

#### åŸºæœ¬å‘½ä»¤

```shell
sar 1 10 # é»˜è®¤ç›‘å¬cpuï¼Œå’Œmpstatä¸€æ ·
sar -d 1 10 # åŠ å‚æ•°-dï¼Œæ·»åŠ ç£ç›˜
sar -q 1 10 # åŠ å‚æ•°-qï¼Œæ˜¾ç¤ºè´Ÿè½½
```

> sar -q 
>
> ldavg-1 ldavg-5 ldavg-15çœ‹æ•´ä¸ªæœåŠ¡å™¨æ˜¯å¦ç¹å¿™ã€‚
>
> ä¾‹å¦‚ï¼Œåœ¨è·‘é¡¹ç›®æ—¶ï¼Œè™½ç„¶æŸä¸ªcpu100%ä½¿ç”¨ç‡ï¼Œä½†æ˜¯å¦ä¸€ä¸ªcpu0%ï¼Œæ•´ä¸ªé¡¹ç›®å®é™…ä¸Šæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ç”¨è¯¥å‘½ä»¤çœ‹æ•´ä½“è´Ÿè½½ã€‚
>
> cpuæ ¸æ•°ä¸º1ï¼Œè´Ÿè½½æ˜¯0.4è¡¨ç¤ºæ­£å¸¸ï¼Œè´Ÿè½½é•¿æœŸ1ä»¥ä¸ŠæœåŠ¡å™¨å­˜åœ¨é—®é¢˜

#### ä½¿ç”¨åœºæ™¯

æ›´åŠ è¯¦ç»†çš„å…¨é¢åˆ†æï¼Œæœ‰ç‚¹åƒä¸‡èƒ½èƒ¶æ°´ï¼Œå¯ä»¥å¤ç”¨åˆ«çš„å‘½ä»¤çš„åŠŸèƒ½ã€‚

## é«˜çº§

### 10.[ç³»ç»Ÿæ€§èƒ½åˆ†æå·¥å…·ï¼šperf - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/186208907)

### 11.[systemtapä»å…¥é—¨åˆ°æ”¾å¼ƒï¼ˆä¸€ï¼‰ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/347313289)

### 12.[Linuxç¥å™¨straceçš„ä½¿ç”¨æ–¹æ³•åŠå®è·µ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/180053751)

### 13.[Linux å…¨èƒ½ç³»ç»Ÿç›‘æ§å·¥å…·dstatçš„å®ä¾‹è¯¦è§£-è…¾è®¯äº‘](https://cloud.tencent.com/developer/article/1722033)

## å‚è€ƒğŸ§²

> [Linux æ‡’äººè¿ç»´:**vmstat,iostat,mpstat,sat,pidstat** ç­‰_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1kX4y1Q7XR/?spm_id_from=333.337.search-card.all.click&vd_source=ac53754f6533097757863a1d248f5406)
>
> [Linux æ‡’äººè¿ç»´:wget,curl,watch,**top**,uptime ç­‰_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1rD4y137Tx/?spm_id_from=pageDriver&vd_source=ac53754f6533097757863a1d248f5406)
>
> [Linux æ‡’äººè¿ç»´:strace,**netstat**,mount,lsblk,history ç­‰_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1L24y1872e/?p=137&spm_id_from=pageDriver&vd_source=ac53754f6533097757863a1d248f5406)
>
> [Linux æ‡’äººè¿ç»´:å¸¸ç”¨å‘½ä»¤ls,cd,mkdir,cat,**free**,df._å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1wY4y1U7KV/?spm_id_from=pageDriver&vd_source=ac53754f6533097757863a1d248f5406)